<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmowy Klikacz Zbożodolców</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            color: #000;
            background-color: #f7f700; /* Cała strona w kolorze żółtym */
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #f7f700; /* Żółte tło nagłówka */
            padding: 10px;
            text-align: center;
            border-bottom: 2px solid #e0b800;
        }

        #discord-login {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            border-bottom: 2px solid #e0b800;
        }

        #login-btn, #logout-btn {
            background-color: #f3c300;
            border: none;
            color: #000;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
        }

        #login-btn:hover, #logout-btn:hover {
            background-color: #e0b800;
        }

        #user-info {
            display: flex;
            align-items: center;
            margin-left: 20px;
        }

        #user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        main {
            display: flex;
            justify-content: space-between;
            padding: 20px;
        }

        #clicker {
            flex: 1;
            text-align: center;
        }

        #click-btn {
            background-color: #f3c300;
            border: none;
            color: #000;
            padding: 20px;
            cursor: pointer;
            font-size: 24px;
        }

        #click-btn:hover {
            background-color: #e0b800;
        }

        aside {
            width: 30%;
        }

        #shop, #purchase-zboza {
            border: 2px solid #e0b800;
            padding: 10px;
            margin-bottom: 20px;
            background-color: #fff;
        }

        .item {
            margin-bottom: 10px;
        }

        .item button {
            background-color: #f3c300;
            border: none;
            color: #000;
            padding: 5px 10px;
            cursor: pointer;
        }

        .item button:hover {
            background-color: #e0b800;
        }
    </style>
</head>
<body>
    <header>
        <div id="discord-login">
            <button id="login-btn">Zaloguj przez Discord</button>
            <div id="user-info" style="display: none;">
                <img id="user-avatar" src="" alt="Avatar">
                <span id="username"></span>
                <button id="logout-btn">Wyloguj</button>
            </div>
        </div>
    </header>
    
    <main>
        <aside id="purchase-zboza">
            <h2>Kup Zboże</h2>
            <p id="zboze">Zboże: 0</p>
            <button id="buy-zboze">Kup Zboże za 5 miliardów zbożodolców</button>
        </aside>

        <div id="clicker">
            <button id="click-btn">Kliknij i Zbierz!</button>
            <p id="zbozodolce">Zbożodolce: 0</p>
        </div>
        
        <aside id="shop">
            <h2>Sklep Farmowy</h2>
            <div id="items"></div>
        </aside>
    </main>

    <script>
        let zbozodolce = 0;
        let zboze = 0;
        let items = [
            { name: 'Podstawowa Motyka', baseCost: 1000000, level: 0, maxLevel: 10, increment: 1, effect: 'Zwiększa zysk o 1 zbożodolca na kliknięcie' },
            { name: 'Zaawansowana Motyka', baseCost: 2000000, level: 0, maxLevel: 10, increment: 2, effect: 'Zwiększa zysk o 2 zbożodolce na kliknięcie' },
            { name: 'Złoty Grabi', baseCost: 3000000, level: 0, maxLevel: 10, increment: 5, effect: 'Zwiększa zysk o 5 zbożodolców na kliknięcie' },
            { name: 'Automatyczny Nawożacz', baseCost: 4000000, level: 0, maxLevel: 10, increment: 1, effect: 'Generuje 1 zbożodolca co sekundę' },
            { name: 'Robot Ogrodniczy', baseCost: 5000000, level: 0, maxLevel: 10, increment: 2, effect: 'Generuje 2 zbożodolce co sekundę' },
            { name: 'Złoty System Nawadniania', baseCost: 6000000, level: 0, maxLevel: 10, increment: 3, effect: 'Generuje 3 zbożodolce co sekundę' },
            { name: 'Wielka Sadzarka', baseCost: 7000000, level: 0, maxLevel: 10, increment: 4, effect: 'Generuje 4 zbożodolce co sekundę' },
            { name: 'Magiczna Siewka', baseCost: 8000000, level: 0, maxLevel: 10, increment: 5, effect: 'Generuje 5 zbożodolców co sekundę' },
            { name: 'Automatyczny Kombajn', baseCost: 9000000, level: 0, maxLevel: 10, increment: 6, effect: 'Generuje 6 zbożodolców co sekundę' },
            { name: 'Super Zbieracz Plonów', baseCost: 10000000, level: 0, maxLevel: 10, increment: 7, effect: 'Generuje 7 zbożodolców co sekundę' }
        ];

        const CLIENT_ID = '1270145381317214311';
        const REDIRECT_URI = 'youtube.com';

        document.getElementById('login-btn').addEventListener('click', () => {
            const authUrl = `https://discord.com/oauth2/authorize?client_id=1270145381317214311&response_type=code&redirect_uri=https%3A%2F%2Fyoutube.com&scope=email+identify`;
            window.location.href = authUrl;
        });

        document.getElementById('logout-btn').addEventListener('click', () => {
            // Handle logout by clearing local storage or invalidating session
            localStorage.removeItem('discordToken');
            document.getElementById('user-info').style.display = 'none';
            document.getElementById('login-btn').style.display = 'block';
        });

        function updateUserInfo(token) {
            fetch('https://discord.com/api/v10/users/@me', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('user-avatar').src = `https://cdn.discordapp.com/avatars/${data.id}/${data.avatar}.png`;
                document.getElementById('username').innerText = data.username;
                document.getElementById('user-info').style.display = 'flex';
                document.getElementById('login-btn').style.display = 'none';
            })
            .catch(error => console.error('Error:', error));
        }

        function handleToken() {
            const hash = window.location.hash.substring(1);
            const params = new URLSearchParams(hash);
            const token = params.get('access_token');
            if (token) {
                localStorage.setItem('discordToken', token);
                updateUserInfo(token);
            } else {
                const storedToken = localStorage.getItem('discordToken');
                if (storedToken) {
                    updateUserInfo(storedToken);
                }
            }
        }

        handleToken();

        document.getElementById('click-btn').addEventListener('click', () => {
            zbozodolce += 1 + getBonus();
            updateZbozodolce();
        });

        document.getElementById('buy-zboze').addEventListener('click', () => {
            if (zbozodolce >= 5000000000) {
                zbozodolce -= 5000000000;
                zboze += 1;
                updateZbozodolce();
                updateZboze();
            } else {
                alert('Nie masz wystarczającej ilości zbożodolców!');
            }
        });

        function getBonus() {
            return items.reduce((bonus, item) => bonus + item.increment * item.level, 0);
        }

        function updateZbozodolce() {
            document.getElementById('zbozodolce').innerText = `Zbożodolce: ${zbozodolce}`;
        }

        function updateZboze() {
            document.getElementById('zboze').innerText = `Zboże: ${zboze}`;
        }

        function updateShop() {
            const itemsContainer = document.getElementById('items');
            itemsContainer.innerHTML = '';
            items.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('item');
                itemDiv.innerHTML = `
                    <h3>${item.name}</h3>
                    <p>${item.effect}</p>
                    <p>Koszt: ${item.baseCost + item.level * 1000000} zbożodolców</p>
                    <p>Poziom: ${item.level}/${item.maxLevel}</p>
                    <button onclick="buyItem(${index})">
                        ${item.level < item.maxLevel ? 'Kup' : 'Ukończono'}
                    </button>
                `;
                itemsContainer.appendChild(itemDiv);
            });
        }

        function buyItem(index) {
            const item = items[index];
            const cost = item.baseCost + item.level * 1000000;
            if (zbozodolce >= cost) {
                zbozodolce -= cost;
                item.level += 1;
                updateZbozodolce();
                updateShop();
            } else {
                alert('Nie masz wystarczającej ilości zbożodolców!');
            }
        }

        updateShop();
    </script>
</body>
</html>
